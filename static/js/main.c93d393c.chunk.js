(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{39:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e.n(c),a=e(20),o=e.n(a),u=e(4),d=e(2),s=e(7),f=e(5),j=e(3),b="token",p=function(n){return localStorage.setItem(b,n)},l=function(){return localStorage.getItem(b)},x="@media screen and (max-width: 768px)",h=Object(c.createContext)(null);function O(){var n=Object(d.a)(["\n  display: flex;\n  width: 100px;\n  justify-content: center;\n  align-items: center;\n  color: #4f5d75;\n  text-decoration: none;\n  height: 100%;\n  box-sizing: border-box;\n  "," {\n    width: 75px;\n  }\n\n  ","\n"]);return O=function(){return n},n}function v(){var n=Object(d.a)(["\n  color: #2d3142;\n  text-decoration: none;\n  font-size: 32px;\n  font-weight: bold;\n  text-align: center;\n  min-width: 200px;\n  "," {\n    div {\n      padding: 10px;\n    }\n    justify-content: center;\n  }\n"]);return v=function(){return n},n}function g(){var n=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n\n  "," {\n    margin-left: 30px;\n    "," {\n      margin-left: 0px;\n    }\n  }\n"]);return g=function(){return n},n}function m(){var n=Object(d.a)(["\n  display: flex;\n  height: 64px;\n\n  "," {\n    height: 64px;\n    justify-content: center;\n  }\n"]);return m=function(){return n},n}function w(){var n=Object(d.a)(["\n  display: flex;\n  top: 0px;\n  right: 0px;\n  left: 0px;\n  height: 64px;\n  position: fixed;\n  border: 1px solid #bfc0c0;\n  align-items: center;\n  padding: 0 30px;\n  background: white;\n\n  "," {\n    display: block;\n    height: 130px;\n    justify-content: center;\n    padding: 0;\n  }\n"]);return w=function(){return n},n}var y=j.a.div(w(),x),k=j.a.div(m(),x),S=j.a.div(g(),k,x),z=Object(j.a)(s.b)(v(),x),C=Object(j.a)(s.b)(O(),x,(function(n){return n.$active&&"background: rgba(0, 0, 0, 0.2)"}));var N=function(){var n=Object(f.g)(),t=Object(f.f)(),e=Object(c.useContext)(h),i=e.user,a=e.setUser;return Object(r.jsxs)(y,{children:[Object(r.jsx)(z,{to:"/",children:Object(r.jsx)("div",{children:"\u90e8\u843d\u683c Blog"})}),Object(r.jsxs)(S,{children:[Object(r.jsxs)(k,{children:[Object(r.jsx)(C,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(r.jsx)(C,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc\u6211"}),Object(r.jsx)(C,{to:"/post-list",$active:"/post-list"===n.pathname,children:"\u6587\u7ae0\u5217\u8868"})]}),Object(r.jsxs)(k,{children:[!i&&Object(r.jsx)(C,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"}),!i&&Object(r.jsx)(C,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),i&&Object(r.jsx)(C,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"}),i&&Object(r.jsx)(C,{onClick:function(){p(""),a(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})]})},T="https://student-json-api.lidemy.me",P=function(){return fetch("".concat(T,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},$=function(){var n=l();return fetch("".concat(T,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function E(){var n=Object(d.a)(["\n  color: #4f5d75;\n  "," {\n    padding-top: 10px;\n  }\n"]);return E=function(){return n},n}function U(){var n=Object(d.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return U=function(){return n},n}function _(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #bfc0c0;\n  padding: 20px;\n  :hover {\n    background: #bfc0c0;\n  }\n  "," {\n    display: block;\n  }\n"]);return _=function(){return n},n}function A(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n  "," {\n    width: 95%;\n  }\n"]);return A=function(){return n},n}var D=j.a.div(A(),x),J=j.a.div(_(),x),B=Object(j.a)(s.b)(U()),L=j.a.div(E(),x);function I(n){var t=n.post;return Object(r.jsxs)(J,{children:[Object(r.jsx)(B,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(L,{children:new Date(t.createdAt).toLocaleString()})]})}var F=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){P().then((function(n){return i(n)}))}),[]),Object(r.jsx)(D,{children:e.map((function(n){return Object(r.jsx)(I,{post:n},n.id)}))})};function M(){var n=Object(d.a)(["\n  color: #2d3142;\n  "," {\n    margin: 5px;\n  }\n"]);return M=function(){return n},n}function R(){var n=Object(d.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background: white;\n  color: #ef8354;\n  cursor: pointer;\n  border-radius: 5px;\n  "," {\n    padding: 15px 20px;\n    font-size: 16px;\n  }\n"]);return R=function(){return n},n}function q(){var n=Object(d.a)(["\n  padding: 5px;\n  width: 200px;\n  border: none;\n  "," {\n    padding: 10px;\n    width: 80%;\n    font-size: 16px;\n  }\n"]);return q=function(){return n},n}function G(){var n=Object(d.a)(["\n  font-size: 16px;\n  color: #ffffff;\n  "," {\n    font-size: 20px;\n    margin: 10px;\n  }\n"]);return G=function(){return n},n}function H(){var n=Object(d.a)(["\n  margin: 10px 0;\n  display: flex;\n  justify-content: center;\n  "," {\n    display: block;\n  }\n"]);return H=function(){return n},n}function K(){var n=Object(d.a)(["\n  color: #ffffff;\n  margin: 35px;\n  "," {\n    font-size: 24px;\n    margin: 20px;\n  }\n"]);return K=function(){return n},n}function Q(){var n=Object(d.a)(["\n  background: #ef8354;\n  margin: 10%;\n  height: 300px;\n  border: 1px solid #ef8354;\n  align-items: center;\n  text-align: center;\n\n  "," {\n    margin: 5% 0;\n    height: 400px;\n  }\n"]);return Q=function(){return n},n}function V(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n  "," {\n    width: 95%;\n  }\n"]);return V=function(){return n},n}var W=j.a.div(V(),x),X=j.a.form(Q(),x),Y=j.a.h2(K(),x),Z=j.a.div(H(),x),nn=j.a.div(G(),x),tn=j.a.input(q(),x),en=j.a.button(R(),x),rn=j.a.h3(M(),x);function cn(n){var t=n.inputName,e=n.inputType,c=n.value,i=n.onChange;return Object(r.jsx)("div",{children:Object(r.jsxs)(Z,{children:[Object(r.jsx)(nn,{children:t}),Object(r.jsx)(tn,{type:e,onChange:i,value:c})]})})}var an=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),d=o[0],s=o[1],j=Object(c.useState)(null),b=Object(u.a)(j,2),l=b[0],x=b[1],O=Object(f.f)(),v=Object(c.useContext)(h).setUser;return Object(r.jsx)(W,{children:Object(r.jsxs)(X,{onSubmit:function(n){n.preventDefault(),x(null),function(n,t){return fetch("".concat(T,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(e,d).then((function(n){0!==n.ok?(p(n.token),$().then((function(n){if(1!==n.ok)return x(n.toString()),void p(null);v(n.data),O.push("/")}))):x(n.message)}))},children:[Object(r.jsx)(Y,{children:"Login"}),l&&Object(r.jsx)(rn,{children:l}),Object(r.jsx)(cn,{inputName:"Username\uff1a",inputType:"text",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(cn,{inputName:"Passwrod\uff1a",inputType:"password",value:d,onChange:function(n){s(n.target.value)}}),Object(r.jsx)(en,{children:"Submit"})]})})};function on(){var n=Object(d.a)(["\n  color: #2d3142;\n  "," {\n    margin: 5px;\n  }\n"]);return on=function(){return n},n}function un(){var n=Object(d.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background: white;\n  color: #ef8354;\n  cursor: pointer;\n  border-radius: 5px;\n  "," {\n    padding: 15px 20px;\n    font-size: 16px;\n  }\n"]);return un=function(){return n},n}function dn(){var n=Object(d.a)(["\n  padding: 5px;\n  width: 200px;\n  border: none;\n  "," {\n    padding: 10px;\n    width: 80%;\n    font-size: 16px;\n  }\n"]);return dn=function(){return n},n}function sn(){var n=Object(d.a)(["\n  font-size: 16px;\n  color: #ffffff;\n  "," {\n    font-size: 20px;\n    margin: 10px;\n  }\n"]);return sn=function(){return n},n}function fn(){var n=Object(d.a)(["\n  margin: 10px 0;\n  display: flex;\n  justify-content: center;\n  "," {\n    display: block;\n  }\n"]);return fn=function(){return n},n}function jn(){var n=Object(d.a)(["\n  color: #ffffff;\n  "," {\n    font-size: 24px;\n    margin: 10px;\n  }\n"]);return jn=function(){return n},n}function bn(){var n=Object(d.a)(["\n  background: #ef8354;\n  margin: 10%;\n  min-height: 300px;\n  align-items: center;\n  text-align: center;\n  border: 1px solid #ef8354;\n  padding-top: 40px;\n  "," {\n    margin: 5% 0;\n    height: 500px;\n  }\n"]);return bn=function(){return n},n}function pn(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n\n  "," {\n    width: 95%;\n  }\n"]);return pn=function(){return n},n}var ln=j.a.div(pn(),x),xn=j.a.form(bn(),x),hn=j.a.h2(jn(),x),On=j.a.div(fn(),x),vn=j.a.div(sn(),x),gn=j.a.input(dn(),x),mn=j.a.button(un(),x),wn=j.a.h3(on(),x);function yn(n){var t=n.inputName,e=n.inputType,c=n.value,i=n.onChange;return Object(r.jsx)("div",{children:Object(r.jsxs)(On,{children:[Object(r.jsx)(vn,{children:t}),Object(r.jsx)(gn,{type:e,onChange:i,value:c})]})})}var kn=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),d=o[0],s=o[1],j=Object(c.useState)(""),b=Object(u.a)(j,2),l=b[0],x=b[1],O=Object(c.useState)(null),v=Object(u.a)(O,2),g=v[0],m=v[1],w=Object(f.f)(),y=Object(c.useContext)(h).setUser;return Object(r.jsx)(ln,{children:Object(r.jsxs)(xn,{onSubmit:function(n){n.preventDefault(),m(null),function(n,t,e){return fetch("".concat(T,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(l,e,d).then((function(n){1===n.ok?(p(n.token),$().then((function(n){if(1!==n.ok)return m(n.toString()),void p(null);y(n.data),w.push("/")}))):m(n.message)}))},children:[Object(r.jsx)(hn,{children:"Register"}),g&&Object(r.jsx)(wn,{children:g}),Object(r.jsx)(yn,{inputName:"Nickname\uff1a",inputType:"text",value:l,onChange:function(n){x(n.target.value)}}),Object(r.jsx)(yn,{inputName:"Username\uff1a",inputType:"text",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(yn,{inputName:"Passwrod\uff1a",inputType:"password",value:d,onChange:function(n){s(n.target.value)}}),Object(r.jsx)(mn,{children:"Submit"})]})})};function Sn(){var n=Object(d.a)(["\n  color: #2d3142;\n"]);return Sn=function(){return n},n}function zn(){var n=Object(d.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background: white;\n  color: #ef8354;\n  cursor: pointer;\n  border-radius: 5px;\n  "," {\n    padding: 15px 20px;\n    font-size: 16px;\n  }\n"]);return zn=function(){return n},n}function Cn(){var n=Object(d.a)(["\n  padding: 5px;\n  width: 450px;\n  border: none;\n  "," {\n    width: 95%;\n    font-size: 16px;\n  }\n"]);return Cn=function(){return n},n}function Nn(){var n=Object(d.a)(["\n  font-size: 18px;\n  color: #ffffff;\n  margin: 5px;\n"]);return Nn=function(){return n},n}function Tn(){var n=Object(d.a)(["\n  width: 450px;\n  margin: 0 auto;\n  text-align: left;\n  "," {\n    width: 95%;\n    font-size: 16px;\n  }\n"]);return Tn=function(){return n},n}function Pn(){var n=Object(d.a)(["\n  color: #ffffff;\n"]);return Pn=function(){return n},n}function $n(){var n=Object(d.a)(["\n  background: #ef8354;\n  margin: 10%;\n  height: 500px;\n  align-items: center;\n  text-align: center;\n  border: 1px solid #ef8354;\n  padding-top: 40px;\n  "," {\n    margin: 5% 0;\n    height: 550px;\n  }\n"]);return $n=function(){return n},n}function En(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n  "," {\n    width: 95%;\n  }\n"]);return En=function(){return n},n}var Un=j.a.div(En(),x),_n=j.a.form($n(),x),An=j.a.h2(Pn()),Dn=j.a.div(Tn(),x),Jn=j.a.div(Nn()),Bn=j.a.textarea(Cn(),x),Ln=j.a.button(zn(),x),In=j.a.h3(Sn());function Fn(n){var t=n.inputName,e=n.inputType,c=n.value,i=n.onChange,a=n.rows;return Object(r.jsx)("div",{children:Object(r.jsxs)(Dn,{children:[Object(r.jsx)(Jn,{children:t}),Object(r.jsx)(Bn,{rows:a,type:e,onChange:i,value:c})]})})}var Mn=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),d=o[0],s=o[1],j=Object(c.useState)(null),b=Object(u.a)(j,2),p=b[0],x=b[1],h=Object(f.f)();return Object(r.jsx)(Un,{children:Object(r.jsxs)(_n,{onSubmit:function(){if(x(null),!e||!d)return x("Please Filled Out the Form.");(function(n,t){var e=l();return fetch("".concat(T,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(e,d).then((function(n){0!==n.ok?h.push("/"):x(n.message)}))},children:[Object(r.jsx)(An,{children:"\u767c\u5e03\u6587\u7ae0"}),p&&Object(r.jsx)(In,{children:p}),Object(r.jsx)(Fn,{inputName:"Title\uff1a",inputType:"text",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(Fn,{inputName:"Content\uff1a",inputType:"text",rows:"10",value:d,onChange:function(n){s(n.target.value)}}),Object(r.jsx)(Ln,{children:"Submit"})]})})};function Rn(){var n=Object(d.a)(["\n  width: 10px;\n  margin-top: 20px;\n  padding: 5px 10px;\n  background: #ef8354;\n  color: #ffffff;\n  cursor: pointer;\n  & + & {\n    margin-left: 5px;\n  }\n"]);return Rn=function(){return n},n}function qn(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n"]);return qn=function(){return n},n}function Gn(){var n=Object(d.a)(["\n  color: #4f5d75;\n  "," {\n    padding-top: 10px;\n  }\n"]);return Gn=function(){return n},n}function Hn(){var n=Object(d.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return Hn=function(){return n},n}function Kn(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #bfc0c0;\n  padding: 20px;\n  :hover {\n    background: #bfc0c0;\n  }\n  "," {\n    display: block;\n  }\n"]);return Kn=function(){return n},n}function Qn(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n  "," {\n    width: 95%;\n  }\n"]);return Qn=function(){return n},n}var Vn=j.a.div(Qn(),x),Wn=j.a.div(Kn(),x),Xn=Object(j.a)(s.b)(Hn()),Yn=j.a.div(Gn(),x),Zn=j.a.div(qn()),nt=j.a.div(Rn());function tt(n){var t=n.post;return Object(r.jsxs)(Wn,{children:[Object(r.jsx)(Xn,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(Yn,{children:new Date(t.createdAt).toLocaleString()})]})}var et=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)([1]),o=Object(u.a)(a,2),d=o[0],s=o[1],f=Object(c.useState)([]),j=Object(u.a)(f,2),b=j[0],p=j[1];return Object(c.useEffect)((function(){P().then((function(n){for(var t=[],e=1;e<=Math.ceil(n.length/5);e+=1)t.push(e);p(t)}))}),[]),Object(c.useEffect)((function(){var n;(n=d,fetch("".concat(T,"/posts?_sort=createdAt&_order=desc&_limit=5&_page=").concat(n)).then((function(n){return n.json()}))).then((function(n){return i(n)}))}),[d]),Object(r.jsxs)(Vn,{children:[e.map((function(n){return Object(r.jsx)(tt,{post:n},n.id)})),Object(r.jsx)(Zn,{children:b.map((function(n){return Object(r.jsx)(nt,{onClick:function(){return function(n){s(n)}(n)},children:n},n)}))})]})};function rt(){var n=Object(d.a)(["\n  padding: 20px;\n  color: #4f5d75;\n  line-height: 2em;\n  word-break: break-all;\n  white-space: break-spaces;\n"]);return rt=function(){return n},n}function ct(){var n=Object(d.a)(["\n  color: #4f5d75;\n  "," {\n    padding-top: 10px;\n  }\n"]);return ct=function(){return n},n}function it(){var n=Object(d.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return it=function(){return n},n}function at(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid grey;\n  padding: 20px;\n  "," {\n    display: block;\n  }\n"]);return at=function(){return n},n}function ot(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n  "," {\n    width: 95%;\n  }\n"]);return ot=function(){return n},n}var ut=j.a.div(ot(),x),dt=j.a.div(at(),x),st=j.a.div(it()),ft=j.a.div(ct(),x),jt=j.a.div(rt());var bt=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(f.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(T,"/posts/").concat(n)).then((function(n){return n.json()}))})(a).then((function(n){return i(n)}))}),[a]),Object(r.jsxs)(ut,{children:[Object(r.jsxs)(dt,{children:[Object(r.jsx)(st,{children:e.title}),Object(r.jsx)(ft,{children:new Date(e.createdAt).toLocaleString()})]}),Object(r.jsx)(jt,{children:e.body})]})};function pt(){var n=Object(d.a)(["\n  padding: 20px;\n  color: #4f5d75;\n  line-height: 2em;\n  word-break: break-all;\n  white-space: break-spaces;\n"]);return pt=function(){return n},n}function lt(){var n=Object(d.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return lt=function(){return n},n}function xt(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid grey;\n  padding: 20px;\n"]);return xt=function(){return n},n}function ht(){var n=Object(d.a)(["\n  margin: 0 auto;\n  width: 80%;\n\n  "," {\n    width: 95%;\n  }\n"]);return ht=function(){return n},n}var Ot=j.a.div(ht(),x),vt=j.a.div(xt()),gt=j.a.div(lt()),mt=j.a.div(pt());var wt=function(){return Object(r.jsxs)(Ot,{children:[Object(r.jsx)(vt,{children:Object(r.jsx)(gt,{children:"\u95dc\u65bc\u6211"})}),Object(r.jsx)(mt,{children:"\u5b89\u5b89\u4f60\u597d\u554a\uff5e \u9019\u662f\u6211\u7684\u90e8\u843d\u683c"})]})};function yt(){var n=Object(d.a)(["\n  padding-top: 64px;\n  "," {\n    padding-top: 130px;\n  }\n"]);return yt=function(){return n},n}var kt=j.a.div(yt(),x);var St=function(){var n=Object(c.useState)(null),t=Object(u.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){l()&&$().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)(h.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)(kt,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(N,{}),Object(r.jsxs)(f.c,{children:[Object(r.jsx)(f.a,{exact:!0,path:"/",children:Object(r.jsx)(F,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/login",children:Object(r.jsx)(an,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/register",children:Object(r.jsx)(kn,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/about",children:Object(r.jsx)(wt,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/post-list",children:Object(r.jsx)(et,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/new-post",children:Object(r.jsx)(Mn,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/post/:id",children:Object(r.jsx)(bt,{})})]})]})})})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(St,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c93d393c.chunk.js.map