(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{39:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e.n(c),a=e(20),o=e.n(a),u=e(4),j=e(2),s=e(7),f=e(5),d=e(3),b="token",l=function(n){return localStorage.setItem(b,n)},p=function(){return localStorage.getItem(b)},O=Object(c.createContext)(null);function x(){var n=Object(j.a)(["\n  display: flex;\n  width: 100px;\n  justify-content: center;\n  align-items: center;\n  color: #4f5d75;\n  text-decoration: none;\n  height: 100%;\n  box-sizing: border-box;\n\n  ","\n"]);return x=function(){return n},n}function h(){var n=Object(j.a)(["\n  color: #2d3142;\n  text-decoration: none;\n  font-size: 32px;\n  font-weight: bold;\n"]);return h=function(){return n},n}function v(){var n=Object(j.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 30px;\n  }\n"]);return v=function(){return n},n}function g(){var n=Object(j.a)(["\n  display: flex;\n  height: 64px;\n"]);return g=function(){return n},n}function m(){var n=Object(j.a)(["\n  display: flex;\n  top: 0px;\n  right: 0px;\n  left: 0px;\n  height: 64px;\n  position: fixed;\n  border: 1px solid #bfc0c0;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 30px;\n  background: white;\n"]);return m=function(){return n},n}var y=d.a.div(m()),w=d.a.div(g()),S=d.a.div(v(),w),k=Object(d.a)(s.b)(h()),C=Object(d.a)(s.b)(x(),(function(n){return n.$active&&"background: rgba(0, 0, 0, 0.2)"}));var T=function(){var n=Object(f.g)(),t=Object(f.f)(),e=Object(c.useContext)(O),i=e.user,a=e.setUser;return Object(r.jsxs)(y,{children:[Object(r.jsxs)(S,{children:[Object(r.jsx)(k,{to:"/",children:"\u90e8\u843d\u683c Blog"}),Object(r.jsxs)(w,{children:[Object(r.jsx)(C,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(r.jsx)(C,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc\u6211"}),Object(r.jsx)(C,{to:"/post-list",$active:"/post-list"===n.pathname,children:"\u6587\u7ae0\u5217\u8868"})]})]}),Object(r.jsxs)(w,{children:[!i&&Object(r.jsx)(C,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"}),!i&&Object(r.jsx)(C,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),i&&Object(r.jsx)(C,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"}),i&&Object(r.jsx)(C,{onClick:function(){l(""),a(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})},N="https://student-json-api.lidemy.me",z=function(){return fetch("".concat(N,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},P=function(){var n=p();return fetch("".concat(N,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function $(){var n=Object(j.a)(["\n  color: #4f5d75;\n"]);return $=function(){return n},n}function E(){var n=Object(j.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return E=function(){return n},n}function F(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #bfc0c0;\n  padding: 20px;\n  :hover {\n    background: #bfc0c0;\n  }\n"]);return F=function(){return n},n}function L(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return L=function(){return n},n}var U=d.a.div(L()),_=d.a.div(F()),A=Object(d.a)(s.b)(E()),B=d.a.div($());function J(n){var t=n.post;return Object(r.jsxs)(_,{children:[Object(r.jsx)(A,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(B,{children:new Date(t.createdAt).toLocaleString()})]})}var D=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){z().then((function(n){return i(n)}))}),[]),Object(r.jsx)(U,{children:e.map((function(n){return Object(r.jsx)(J,{post:n},n.id)}))})};function I(){var n=Object(j.a)(["\n  color: #2d3142;\n"]);return I=function(){return n},n}function M(){var n=Object(j.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background: white;\n  color: #ef8354;\n  cursor: pointer;\n  border-radius: 5px;\n"]);return M=function(){return n},n}function R(){var n=Object(j.a)(["\n  padding: 5px;\n  width: 200px;\n  border: none;\n"]);return R=function(){return n},n}function q(){var n=Object(j.a)(["\n  font-size: 16px;\n  color: #ffffff;\n"]);return q=function(){return n},n}function G(){var n=Object(j.a)(["\n  margin: 10px 0;\n  display: flex;\n  justify-content: center;\n"]);return G=function(){return n},n}function H(){var n=Object(j.a)(["\n  color: #ffffff;\n"]);return H=function(){return n},n}function K(){var n=Object(j.a)(["\n  background: #ef8354;\n  margin: 10%;\n  height: 280px;\n  align-items: center;\n  text-align: center;\n  border: 1px solid #ef8354;\n  padding-top: 40px;\n"]);return K=function(){return n},n}function Q(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return Q=function(){return n},n}var V=d.a.div(Q()),W=d.a.form(K()),X=d.a.h2(H()),Y=d.a.div(G()),Z=d.a.div(q()),nn=d.a.input(R()),tn=d.a.button(M()),en=d.a.h3(I());function rn(n){var t=n.inputName,e=n.inputType,c=n.value,i=n.onChange;return Object(r.jsx)("div",{children:Object(r.jsxs)(Y,{children:[Object(r.jsx)(Z,{children:t}),Object(r.jsx)(nn,{type:e,onChange:i,value:c})]})})}var cn=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),j=o[0],s=o[1],d=Object(c.useState)(null),b=Object(u.a)(d,2),p=b[0],x=b[1],h=Object(f.f)(),v=Object(c.useContext)(O).setUser;return Object(r.jsx)(V,{children:Object(r.jsxs)(W,{onSubmit:function(){x(null),function(n,t){return fetch("".concat(N,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(e,j).then((function(n){0!==n.ok?(l(n.token),P().then((function(n){if(1!==n.ok)return x(n.toString()),void l(null);v(n.data),h.push("/")}))):x(n.message)}))},children:[Object(r.jsx)(X,{children:"Login"}),p&&Object(r.jsx)(en,{children:p}),Object(r.jsx)(rn,{inputName:"Username\uff1a",inputType:"text",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(rn,{inputName:"Passwrod\uff1a",inputType:"password",value:j,onChange:function(n){s(n.target.value)}}),Object(r.jsx)(tn,{children:"Submit"})]})})};function an(){var n=Object(j.a)(["\n  color: #2d3142;\n"]);return an=function(){return n},n}function on(){var n=Object(j.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background: white;\n  color: #ef8354;\n  cursor: pointer;\n  border-radius: 5px;\n"]);return on=function(){return n},n}function un(){var n=Object(j.a)(["\n  padding: 5px;\n  width: 200px;\n  border: none;\n"]);return un=function(){return n},n}function jn(){var n=Object(j.a)(["\n  font-size: 16px;\n  color: #ffffff;\n"]);return jn=function(){return n},n}function sn(){var n=Object(j.a)(["\n  margin: 10px 0;\n  display: flex;\n  justify-content: center;\n"]);return sn=function(){return n},n}function fn(){var n=Object(j.a)(["\n  color: #ffffff;\n"]);return fn=function(){return n},n}function dn(){var n=Object(j.a)(["\n  background: #ef8354;\n  margin: 10%;\n  min-height: 300px;\n  align-items: center;\n  text-align: center;\n  border: 1px solid #ef8354;\n  padding-top: 40px;\n"]);return dn=function(){return n},n}function bn(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return bn=function(){return n},n}var ln=d.a.div(bn()),pn=d.a.form(dn()),On=d.a.h2(fn()),xn=d.a.div(sn()),hn=d.a.div(jn()),vn=d.a.input(un()),gn=d.a.button(on()),mn=d.a.h3(an());function yn(n){var t=n.inputName,e=n.inputType,c=n.value,i=n.onChange;return Object(r.jsx)("div",{children:Object(r.jsxs)(xn,{children:[Object(r.jsx)(hn,{children:t}),Object(r.jsx)(vn,{type:e,onChange:i,value:c})]})})}var wn=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),j=o[0],s=o[1],d=Object(c.useState)(""),b=Object(u.a)(d,2),p=b[0],x=b[1],h=Object(c.useState)(null),v=Object(u.a)(h,2),g=v[0],m=v[1],y=Object(f.f)(),w=Object(c.useContext)(O).setUser;return Object(r.jsx)(ln,{children:Object(r.jsxs)(pn,{onSubmit:function(){m(null),function(n,t,e){return fetch("".concat(N,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(p,e,j).then((function(n){1===n.ok?(l(n.token),P().then((function(n){if(1!==n.ok)return m(n.toString()),void l(null);w(n.data),y.push("/")}))):m(n.message)}))},children:[Object(r.jsx)(On,{children:"Register"}),g&&Object(r.jsx)(mn,{children:g}),Object(r.jsx)(yn,{inputName:"Nickname\uff1a",inputType:"text",value:p,onChange:function(n){x(n.target.value)}}),Object(r.jsx)(yn,{inputName:"Username\uff1a",inputType:"text",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(yn,{inputName:"Passwrod\uff1a",inputType:"password",value:j,onChange:function(n){s(n.target.value)}}),Object(r.jsx)(gn,{children:"Submit"})]})})};function Sn(){var n=Object(j.a)(["\n  color: #2d3142;\n"]);return Sn=function(){return n},n}function kn(){var n=Object(j.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background: white;\n  color: #ef8354;\n  cursor: pointer;\n  border-radius: 5px;\n"]);return kn=function(){return n},n}function Cn(){var n=Object(j.a)(["\n  padding: 5px;\n  width: 450px;\n  border: none;\n"]);return Cn=function(){return n},n}function Tn(){var n=Object(j.a)(["\n  font-size: 18px;\n  color: #ffffff;\n  margin: 5px;\n"]);return Tn=function(){return n},n}function Nn(){var n=Object(j.a)(["\n  width: 450px;\n  margin: 0 auto;\n  text-align: left;\n"]);return Nn=function(){return n},n}function zn(){var n=Object(j.a)(["\n  color: #ffffff;\n"]);return zn=function(){return n},n}function Pn(){var n=Object(j.a)(["\n  background: #ef8354;\n  margin: 10%;\n  height: 500px;\n  align-items: center;\n  text-align: center;\n  border: 1px solid #ef8354;\n  padding-top: 40px;\n"]);return Pn=function(){return n},n}function $n(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return $n=function(){return n},n}var En=d.a.div($n()),Fn=d.a.form(Pn()),Ln=d.a.h2(zn()),Un=d.a.div(Nn()),_n=d.a.div(Tn()),An=d.a.textarea(Cn()),Bn=d.a.button(kn()),Jn=d.a.h3(Sn());function Dn(n){var t=n.inputName,e=n.inputType,c=n.value,i=n.onChange,a=n.rows;return Object(r.jsx)("div",{children:Object(r.jsxs)(Un,{children:[Object(r.jsx)(_n,{children:t}),Object(r.jsx)(An,{rows:a,type:e,onChange:i,value:c})]})})}var In=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),j=o[0],s=o[1],d=Object(c.useState)(null),b=Object(u.a)(d,2),l=b[0],O=b[1],x=Object(f.f)();return Object(r.jsx)(En,{children:Object(r.jsxs)(Fn,{onSubmit:function(){if(O(null),!e||!j)return O("Please Filled Out the Form.");(function(n,t){var e=p();return fetch("".concat(N,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(e,j).then((function(n){0!==n.ok?x.push("/"):O(n.message)}))},children:[Object(r.jsx)(Ln,{children:"\u767c\u5e03\u6587\u7ae0"}),l&&Object(r.jsx)(Jn,{children:l}),Object(r.jsx)(Dn,{inputName:"Title\uff1a",inputType:"text",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(Dn,{inputName:"Content\uff1a",inputType:"text",rows:"10",value:j,onChange:function(n){s(n.target.value)}}),Object(r.jsx)(Bn,{children:"Submit"})]})})};function Mn(){var n=Object(j.a)(["\n  width: 10px;\n  margin-top: 20px;\n  padding: 5px 10px;\n  background: #ef8354;\n  color: #ffffff;\n  cursor: pointer;\n  & + & {\n    margin-left: 5px;\n  }\n"]);return Mn=function(){return n},n}function Rn(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n"]);return Rn=function(){return n},n}function qn(){var n=Object(j.a)(["\n  color: #4f5d75;\n"]);return qn=function(){return n},n}function Gn(){var n=Object(j.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return Gn=function(){return n},n}function Hn(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #bfc0c0;\n  padding: 20px;\n  :hover {\n    background: #bfc0c0;\n  }\n"]);return Hn=function(){return n},n}function Kn(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return Kn=function(){return n},n}var Qn=d.a.div(Kn()),Vn=d.a.div(Hn()),Wn=Object(d.a)(s.b)(Gn()),Xn=d.a.div(qn()),Yn=d.a.div(Rn()),Zn=d.a.div(Mn());function nt(n){var t=n.post;return Object(r.jsxs)(Vn,{children:[Object(r.jsx)(Wn,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(Xn,{children:new Date(t.createdAt).toLocaleString()})]})}var tt=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)([1]),o=Object(u.a)(a,2),j=o[0],s=o[1],f=Object(c.useState)([]),d=Object(u.a)(f,2),b=d[0],l=d[1];return Object(c.useEffect)((function(){z().then((function(n){for(var t=[],e=1;e<=Math.ceil(n.length/5);e++)t.push(e);l(t)}))}),[]),Object(c.useEffect)((function(){var n;(n=j,fetch("".concat(N,"/posts?_sort=createdAt&_order=desc&_limit=5&_page=").concat(n)).then((function(n){return n.json()}))).then((function(n){return i(n)}))}),[j]),Object(r.jsxs)(Qn,{children:[e.map((function(n){return Object(r.jsx)(nt,{post:n},n.id)})),Object(r.jsx)(Yn,{children:b.map((function(n){return Object(r.jsx)(Zn,{onClick:function(){return function(n){s(n)}(n)},children:n},n)}))})]})};function et(){var n=Object(j.a)(["\n  padding: 20px;\n  color: #4f5d75;\n  line-height: 2em;\n  word-break: break-all;\n  white-space: break-spaces;\n"]);return et=function(){return n},n}function rt(){var n=Object(j.a)(["\n  color: #4f5d75;\n"]);return rt=function(){return n},n}function ct(){var n=Object(j.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return ct=function(){return n},n}function it(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid grey;\n  padding: 20px;\n"]);return it=function(){return n},n}function at(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return at=function(){return n},n}var ot=d.a.div(at()),ut=d.a.div(it()),jt=d.a.div(ct()),st=d.a.div(rt()),ft=d.a.div(et());var dt=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(f.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(N,"/posts/").concat(n)).then((function(n){return n.json()}))})(a).then((function(n){return i(n)}))}),[a]),Object(r.jsxs)(ot,{children:[Object(r.jsxs)(ut,{children:[Object(r.jsx)(jt,{children:e.title}),Object(r.jsx)(st,{children:new Date(e.createdAt).toLocaleString()})]}),Object(r.jsx)(ft,{children:e.body})]})};function bt(){var n=Object(j.a)(["\n  padding: 20px;\n  color: #4f5d75;\n  line-height: 2em;\n  word-break: break-all;\n  white-space: break-spaces;\n"]);return bt=function(){return n},n}function lt(){var n=Object(j.a)(["\n  font-size: 20px;\n  text-decoration: none;\n  color: #2d3142;\n"]);return lt=function(){return n},n}function pt(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid grey;\n  padding: 20px;\n"]);return pt=function(){return n},n}function Ot(){var n=Object(j.a)(["\n  margin: 0 auto;\n  width: 80%;\n"]);return Ot=function(){return n},n}var xt=d.a.div(Ot()),ht=d.a.div(pt()),vt=d.a.div(lt()),gt=d.a.div(bt());var mt=function(){return Object(r.jsxs)(xt,{children:[Object(r.jsx)(ht,{children:Object(r.jsx)(vt,{children:"\u95dc\u65bc\u6211"})}),Object(r.jsx)(gt,{children:"\u5b89\u5b89\u4f60\u597d\u554a\uff5e \u9019\u662f\u6211\u7684\u90e8\u843d\u683c"})]})};function yt(){var n=Object(j.a)(["\n  padding-top: 64px;\n"]);return yt=function(){return n},n}var wt=d.a.div(yt());var St=function(){var n=Object(c.useState)(null),t=Object(u.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){p()&&P().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)(O.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)(wt,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(T,{}),Object(r.jsxs)(f.c,{children:[Object(r.jsx)(f.a,{exact:!0,path:"/",children:Object(r.jsx)(D,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/login",children:Object(r.jsx)(cn,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/register",children:Object(r.jsx)(wn,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/about",children:Object(r.jsx)(mt,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/post-list",children:Object(r.jsx)(tt,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/new-post",children:Object(r.jsx)(In,{})}),Object(r.jsx)(f.a,{exact:!0,path:"/post/:id",children:Object(r.jsx)(dt,{})})]})]})})})},kt=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,40)).then((function(t){var e=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;e(n),r(n),c(n),i(n),a(n)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(St,{})}),document.getElementById("root")),kt()}},[[39,1,2]]]);
//# sourceMappingURL=main.1a584264.chunk.js.map